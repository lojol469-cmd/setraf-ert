#!/bin/bash

###############################################################################
#  ðŸ“Š KibaLock - Vue d'ensemble de l'architecture                            #
###############################################################################

cat << "EOF"

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘                    ðŸ” ARCHITECTURE KIBALOCK                               â•‘
â•‘                    Multi-Conteneurs Docker + GPU                          â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚                    CLIENT (Navigateur Web)                              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTP/HTTPS
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚              ðŸŒ NGINX Reverse Proxy (Port 80/443)                      â”‚
â”‚                  SSL Termination + Load Balancing                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚          â”‚             â”‚              â”‚
   â”‚          â”‚             â”‚              â”‚
   â”‚ /        â”‚ /api/       â”‚ /backend/    â”‚ /api/tts/
   â”‚          â”‚  lifemodo/  â”‚              â”‚
   â”‚          â”‚             â”‚              â”‚
   â”‚          â”‚             â”‚              â”‚
â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚             â”‚              â”‚
â”‚          â”‚  â”‚             â”‚              â”‚
â”‚ Frontend â”‚  â”‚             â”‚              â”‚
â”‚ React 3D â”‚  â”‚             â”‚              â”‚
â”‚          â”‚  â”‚             â”‚              â”‚
â”‚ Port:    â”‚  â”‚             â”‚              â”‚
â”‚ 3000     â”‚  â”‚             â”‚              â”‚
â”‚          â”‚  â”‚             â”‚              â”‚
â”‚ â€¢ UI 3D  â”‚  â”‚             â”‚              â”‚
â”‚ â€¢ Three  â”‚  â”‚             â”‚              â”‚
â”‚   .js    â”‚  â”‚             â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚              â”‚
              â”‚             â”‚              â”‚
         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚ â”‚           â”‚  â”‚          â”‚
         â”‚ LifeModo  â”‚ â”‚ Backend   â”‚  â”‚ TTS Svc  â”‚
         â”‚ API       â”‚ â”‚ KibaLock  â”‚  â”‚          â”‚
         â”‚           â”‚ â”‚           â”‚  â”‚          â”‚
         â”‚ Port:     â”‚ â”‚ Port:     â”‚  â”‚ Port:    â”‚
         â”‚ 8000      â”‚ â”‚ 8505      â”‚  â”‚ 8001     â”‚
         â”‚           â”‚ â”‚           â”‚  â”‚          â”‚
         â”‚ NumPy:    â”‚ â”‚ NumPy:    â”‚  â”‚ NumPy:   â”‚
         â”‚ 1.23.5    â”‚ â”‚ 2.2.6     â”‚  â”‚ 1.22.0   â”‚
         â”‚           â”‚ â”‚           â”‚  â”‚          â”‚
         â”‚ FastAPI   â”‚ â”‚ Streamlit â”‚  â”‚ FastAPI  â”‚
         â”‚ Transform â”‚ â”‚ FAISS     â”‚  â”‚ Coqui    â”‚
         â”‚ LangChain â”‚ â”‚ DeepFace  â”‚  â”‚ TTS      â”‚
         â”‚ Whisper   â”‚ â”‚ OpenCV    â”‚  â”‚          â”‚
         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
               â”‚             â”‚              â”‚
               â”‚ GPU         â”‚ GPU          â”‚ GPU
               â”‚ Access      â”‚ Access       â”‚ Access
               â”‚             â”‚              â”‚
         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
         â”‚                                        â”‚
         â”‚     ðŸŽ® NVIDIA GPU (RTX 5090)          â”‚
         â”‚     CUDA 13.0 - 23.9 GB VRAM          â”‚
         â”‚                                        â”‚
         â”‚     PyTorch 2.10.0+cu130               â”‚
         â”‚     (PartagÃ© entre conteneurs)         â”‚
         â”‚                                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
         â”‚           â”‚
         â”‚ MongoDB   â”‚
         â”‚           â”‚
         â”‚ Port:     â”‚
         â”‚ 27017     â”‚
         â”‚           â”‚
         â”‚ â€¢ Users   â”‚
         â”‚ â€¢ Bio DB  â”‚
         â”‚ â€¢ Sessionsâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘  ðŸ“¦ RÃ‰SOLUTION DES CONFLITS DE DÃ‰PENDANCES                                â•‘
â•‘                                                                           â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚ Service          â”‚ NumPy        â”‚ Raison                         â”‚    â•‘
â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â•‘
â•‘  â”‚ LifeModo API     â”‚ 1.23.5       â”‚ Transformers compatible        â”‚    â•‘
â•‘  â”‚ Backend KibaLock â”‚ 2.2.6        â”‚ FAISS requis numpy._core       â”‚    â•‘
â•‘  â”‚ TTS Service      â”‚ 1.22.0       â”‚ Coqui TTS strict requirement   â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                           â•‘
â•‘  âœ… Chaque conteneur a son environnement Python isolÃ©                     â•‘
â•‘  âœ… Communication via rÃ©seau Docker (kibalock-network)                    â•‘
â•‘  âœ… GPU partagÃ© entre tous les conteneurs avec NVIDIA Docker              â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘  ðŸ—‚ï¸ VOLUMES PARTAGÃ‰S                                                      â•‘
â•‘                                                                           â•‘
â•‘  models/                  ðŸ“ ModÃ¨les IA (partagÃ© read-only)              â•‘
â•‘  â”œâ”€â”€ huggingface/            Transformers (7-10 GB)                      â•‘
â•‘  â”œâ”€â”€ transformers/           Cache modÃ¨les                               â•‘
â•‘  â”œâ”€â”€ tts/                    ModÃ¨les Coqui TTS (2 GB)                    â•‘
â•‘  â””â”€â”€ faiss/                  Index biomÃ©triques                          â•‘
â•‘                                                                           â•‘
â•‘  data/                    ðŸ“ DonnÃ©es persistantes                         â•‘
â•‘  â””â”€â”€ faiss_indices/          Index FAISS (read-write)                    â•‘
â•‘                                                                           â•‘
â•‘  logs/                    ðŸ“ Logs applicatifs                             â•‘
â•‘  â”œâ”€â”€ lifemodo/               Logs API                                    â•‘
â•‘  â”œâ”€â”€ backend/                Logs Backend                                â•‘
â•‘  â””â”€â”€ tts/                    Logs TTS                                    â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘  ðŸš€ COMMANDES RAPIDES                                                     â•‘
â•‘                                                                           â•‘
â•‘  DÃ©ploiement complet:                                                     â•‘
â•‘  $ ./deploy-docker.sh deploy                                              â•‘
â•‘                                                                           â•‘
â•‘  DÃ©marrer/ArrÃªter:                                                        â•‘
â•‘  $ ./deploy-docker.sh start                                               â•‘
â•‘  $ ./deploy-docker.sh stop                                                â•‘
â•‘                                                                           â•‘
â•‘  Voir les logs:                                                           â•‘
â•‘  $ ./deploy-docker.sh logs [service-name]                                 â•‘
â•‘                                                                           â•‘
â•‘  Rebuil si problÃ¨me:                                                      â•‘
â•‘  $ ./deploy-docker.sh rebuild                                             â•‘
â•‘                                                                           â•‘
â•‘  Nettoyage complet:                                                       â•‘
â•‘  $ ./deploy-docker.sh clean                                               â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EOF
